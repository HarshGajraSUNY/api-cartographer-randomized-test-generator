# API Cartographer and Randomized Automated Test Generator

# Author: 
**Harsh Mohan Gajra**

# Project Overview:
This project is a test generator for APIs. It automatically creates a dependency graph between APIs and randomizes test creation to ensure robust validation of API interactions. All dependencies are managed for reproducible setup and testing.
# Description:
This project is built with Python using FastAPI and served by the Uvicorn ASGI server. It automatically creates a dependency graph between APIs and randomizes test creation to ensure robust validation of API interactions. All dependencies are managed for reproducible setup and testing.

# Project Setup

## 1\. Create a virtual environment
```bash
python3 -m venv .venv
```

## 2\. Activate the virtual environment
```bash
source .venv/bin/activate
```

## 3\. Install uv package manager (>100% faster than pip https://github.com/astral-sh/uv)
```bash
pip install uv
```

## 4\. Install dependencies with uv
```bash
uv sync
```

## 5\. Run tests with pytest  
This will set up and run the Uvicorn server to host APIs and execute valid/invalid tests.
```bash
pytest -s
```

## 6. Run the server outside the tests (not required for running tests)
```bash
pyton3 mock_api.py
```

## 7. Visualize the API dependency graph
```bash
python3 graph_builder.py
```
## 

## APIs:
* create_user
* create_account
* create_transaction
* create_analytics


# Implementation:
All APIs are defined in the `api_config.yaml` file.

`mock_api.py` is the main API server that containts implementations for all APIs defined in the `api_config.yaml` file.

The `api_config.yaml` file is used to generate the dependency graph and test cases.

Graph is built using `graph_builder.py` and tests are generated using `path_generator.py`.

Feature: You can also visualize the dependency graph by running `python3 graph_builder.py` in matplotlib.

`test_executor.py` is used to execute the tests and trigger the API calls.

## About the tests:
Tests are generated using a depth-first search algorithm. The search is limited to a maximum depth and number of paths.

Valid paths are generated by randomly selecting a valid starting node and then recursively selecting a child node until the maximum depth is reached.

Invalid paths are generated by randomly selecting a not valid node as starting node and then recursively selecting a child node until the maximum depth is reached.

We pass both valid and invalid data to the APIs to ensure robust validation.

About 6 total valid paths with 3 valid data and 3 invalid data are generated.

* VALID_PATH | create_user -> create_account -> create_transaction | valid_data
* VALID_PATH | create_user -> create_account -> create_analytics | valid_data
* VALID_PATH | create_user -> create_account -> create_transaction | valid_data
* VALID_PATH | create_user -> create_account -> create_transaction | invalid_data
* VALID_PATH | create_user -> create_account -> create_analytics | invalid_data
* VALID_PATH | create_user -> create_account -> create_transaction | invalid_data

About 3 total invalid paths are generated all randomized.
* INVALID_PATH | create_account -> create_user -> create_analytics
* INVALID_PATH | create_account
* INVALID_PATH | create_account -> create_user

## Test Data:
The folder `test_data` contains the test data for the APIs.

Both valid and invalid data is present in the `test_data` folder to create valid and invalid test cases.
Note: Invalid data is also used with valid test cases to ensure robust validation.
